{"mappings":"AAAA,IAAMA,QAAU,uCAEVC,WAAa,SAACC,OAAWC,EAAMC,UAAAC,OAAA,QAAA,IAAAD,UAAA,GAAAA,UAAA,GAAG,EAAGE,EAAKF,UAAAC,OAAA,QAAA,IAAAD,UAAA,GAAAA,UAAA,GAAG,GACzCG,EAAU,IAAIC,eACpBD,EAAQE,KAAK,MAAQ,GAAUC,OAARV,QAAQ,cAAY,GAC3CO,EAAQI,iBAAiB,oBAAoB,WACzC,GAAIJ,EAAQK,aAAeJ,eAAeK,KACtC,GAAuB,MAAnBN,EAAQO,OAAgB,CACxB,IAAMC,EAAWC,KAAKC,MAAMV,EAAQW,cAChCH,EAASI,MAAQhB,EAAS,IAC1BG,EAAQS,EAASI,MAAQhB,EACzBA,EAAS,GAETA,EAASY,EAASI,MAAQ,GAAKhB,EAEnC,IAAMiB,EAAW,IAAIZ,eACrBY,EAASX,KAAK,MAAQ,GAA6BC,OAA3BV,QAAQ,qBAAuDU,OAApCW,mBAAmBlB,GAAQ,WAAmCO,OAA1BW,mBAAmBf,KAAU,GACpHc,EAAST,iBAAiB,oBAAoB,WAC1C,GAAIS,EAASR,aAAeJ,eAAeK,KACvC,GAAwB,MAApBO,EAASN,OAAgB,CACzB,IAAMQ,EAAYN,KAAKC,MAAMG,EAASF,cACtChB,EAAUoB,QAEVC,MAAM,0CAIlBH,EAASI,YAETD,MAAM,0CAIlBhB,EAAQiB","sources":["src/js/api.js"],"sourcesContent":["const API_URL = \"https://ecf-dwwm.cefim-formation.org\";\r\n\r\nconst apiGetJobs = (onSuccess, offset = 0, limit = 12) => {\r\n    const request = new XMLHttpRequest();\r\n    request.open(\"GET\", `${API_URL}/api/jobs`, true);\r\n    request.addEventListener(\"readystatechange\", function() {\r\n        if (request.readyState === XMLHttpRequest.DONE) {\r\n            if (request.status === 200) {\r\n                const response = JSON.parse(request.responseText);\r\n                if (response.total - offset < 12) {\r\n                    limit = response.total - offset;\r\n                    offset = 0;\r\n                } else {\r\n                    offset = response.total - 12 - offset;\r\n                }\r\n                const request2 = new XMLHttpRequest();\r\n                request2.open(\"GET\", `${API_URL}/api/jobs?offset=${encodeURIComponent(offset)}&limit=${encodeURIComponent(limit)}`, true);\r\n                request2.addEventListener(\"readystatechange\", function() {\r\n                    if (request2.readyState === XMLHttpRequest.DONE) {\r\n                        if (request2.status === 200) {\r\n                            const response2 = JSON.parse(request2.responseText);\r\n                            onSuccess(response2);\r\n                        } else {\r\n                            alert(\"Erreur : TODO, gérer les erreurs...\");\r\n                        }\r\n                    }\r\n                });\r\n                request2.send();\r\n            } else {\r\n                alert(\"Erreur : TODO, gérer les erreurs...\");\r\n            }\r\n        }\r\n    });\r\n    request.send();\r\n}\r\n"],"names":["API_URL","apiGetJobs","onSuccess","offset","arguments","length","limit","request","XMLHttpRequest","open","concat","addEventListener","readyState","DONE","status","response","JSON","parse","responseText","total","request2","encodeURIComponent","response2","alert","send"],"version":3,"file":"index.a2402d79.js.map"}