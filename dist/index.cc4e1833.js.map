{"mappings":"AAAA,IAAMA,QAAU,uCAEVC,WAAa,SAACC,OACZC,EADuBC,EAAMC,UAAAC,OAAA,QAAA,IAAAD,UAAA,GAAAA,UAAA,GAAG,EAAGE,EAAIF,UAAAC,OAAA,QAAA,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAAIG,EAAQH,UAAAC,OAAA,QAAA,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAAII,EAAQJ,UAAAC,OAAA,QAAA,IAAAD,UAAA,GAAAA,UAAA,GAAG,EAAGK,EAAKL,UAAAC,OAAA,QAAA,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAEjFM,EAAU,IAAIC,eAChBL,GAAQC,GAA0B,IAAbC,GAA+B,IAAbA,GACvCE,EAAQE,KAAK,MAAQ,GAAkCC,OAAhCd,QAAQ,0BAA6Dc,OAArCC,mBAAmBR,GAAM,cAAqDO,OAAzCC,mBAAmBP,GAAU,cAAyCM,OAA7BC,mBAAmBN,KAAa,GACrKN,EAAO,GAAkCW,OAAhCd,QAAQ,0BAA6Dc,OAArCC,mBAAmBR,GAAM,cAAqDO,OAAzCC,mBAAmBP,GAAU,cAAmDM,OAAvCC,mBAAmBN,GAAU,YAAqCK,OAA3BC,mBAAmBX,MAEjLO,EAAQE,KAAK,MAAQ,GAAUC,OAARd,QAAQ,cAAY,GAC3CG,EAAO,GAA6BW,OAA3Bd,QAAQ,qBAA8Cc,OAA3BC,mBAAmBX,KAE3DO,EAAQK,iBAAiB,oBAAoB,WACzC,GAAIL,EAAQM,aAAeL,eAAeM,KACtC,GAAuB,MAAnBP,EAAQQ,OAAgB,CACxB,IAAMC,EAAWC,KAAKC,MAAMX,EAAQY,cAChCH,EAASI,MAAQpB,EAAS,KAC1BM,EAAQU,EAASI,MAAQpB,GAE7B,IAAMqB,EAAW,IAAIb,eACrBa,EAASZ,KAAK,MAAOV,EAAO,UAAmCW,OAA1BC,mBAAmBL,KAAU,GAClEe,EAAST,iBAAiB,oBAAoB,WAC1C,GAAIS,EAASR,aAAeL,eAAeM,KACvC,GAAwB,MAApBO,EAASN,OAAgB,CACzB,IAAMO,EAAYL,KAAKC,MAAMG,EAASF,cACtCrB,EAAUwB,QAEVC,MAAM,0CAIlBF,EAASG,YAETD,MAAM,0CAIlBhB,EAAQiB,QAGNC,iBAAmB,SAACC,EAAI5B,GAC1B,IAAMS,EAAU,IAAIC,eACpBD,EAAQE,KAAK,MAAQ,GAAqBC,OAAnBd,QAAQ,aAAkCc,OAAvBC,mBAAmBe,KAAO,GACpEnB,EAAQK,iBAAiB,oBAAoB,WACzC,GAAIL,EAAQM,aAAeL,eAAeM,KACtC,GAAuB,MAAnBP,EAAQQ,OAAgB,CACxB,IAAMC,EAAWC,KAAKC,MAAMX,EAAQY,cACpCrB,EAAUkB,QAEVO,MAAM,0CAIlBhB,EAAQiB","sources":["src/js/api.js"],"sourcesContent":["const API_URL = \"https://ecf-dwwm.cefim-formation.org\";\r\n\r\nconst apiGetJobs = (onSuccess, offset = 0, text = '', location = '', fulltime = 2, limit = 12) => {\r\n    let url;\r\n    const request = new XMLHttpRequest();\r\n    if (text || location || (fulltime === 1 || fulltime === 0)) {\r\n        request.open(\"GET\", `${API_URL}/api/jobs/search?text=${encodeURIComponent(text)}&location=${encodeURIComponent(location)}&fulltime=${encodeURIComponent(fulltime)}`, true);\r\n        url = `${API_URL}/api/jobs/search?text=${encodeURIComponent(text)}&location=${encodeURIComponent(location)}&fulltime=${encodeURIComponent(fulltime)}&offset=${encodeURIComponent(offset)}`;\r\n    } else {\r\n        request.open(\"GET\", `${API_URL}/api/jobs`, true);\r\n        url = `${API_URL}/api/jobs?offset=${encodeURIComponent(offset)}`;\r\n    }\r\n    request.addEventListener(\"readystatechange\", function() {\r\n        if (request.readyState === XMLHttpRequest.DONE) {\r\n            if (request.status === 200) {\r\n                const response = JSON.parse(request.responseText);\r\n                if (response.total - offset < 12) {\r\n                    limit = response.total - offset;\r\n                }\r\n                const request2 = new XMLHttpRequest();\r\n                request2.open(\"GET\", url + `&limit=${encodeURIComponent(limit)}`, true);\r\n                request2.addEventListener(\"readystatechange\", function() {\r\n                    if (request2.readyState === XMLHttpRequest.DONE) {\r\n                        if (request2.status === 200) {\r\n                            const response2 = JSON.parse(request2.responseText);\r\n                            onSuccess(response2);\r\n                        } else {\r\n                            alert(\"Erreur : TODO, gérer les erreurs...\");\r\n                        }\r\n                    }\r\n                });\r\n                request2.send();\r\n            } else {\r\n                alert(\"Erreur : TODO, gérer les erreurs...\");\r\n            }\r\n        }\r\n    });\r\n    request.send();\r\n};\r\n\r\nconst apiGetJobDetails = (id, onSuccess) => {\r\n    const request = new XMLHttpRequest();\r\n    request.open(\"GET\", `${API_URL}/api/job/${encodeURIComponent(id)}`, true);\r\n    request.addEventListener(\"readystatechange\", function() {\r\n        if (request.readyState === XMLHttpRequest.DONE) {\r\n            if (request.status === 200) {\r\n                const response = JSON.parse(request.responseText);\r\n                onSuccess(response);\r\n            } else {\r\n                alert(\"Erreur : TODO, gérer les erreurs...\");\r\n            }\r\n        }\r\n    });\r\n    request.send();\r\n};"],"names":["API_URL","apiGetJobs","onSuccess","url","offset","arguments","length","text","location","fulltime","limit","request","XMLHttpRequest","open","concat","encodeURIComponent","addEventListener","readyState","DONE","status","response","JSON","parse","responseText","total","request2","response2","alert","send","apiGetJobDetails","id"],"version":3,"file":"index.cc4e1833.js.map"}